<!DOCTYPE html>
<html lang="en"><head>
<script src="SICSS_02_screenscraping_files/libs/clipboard/clipboard.min.js"></script>
<script src="SICSS_02_screenscraping_files/libs/quarto-html/tabby.min.js"></script>
<script src="SICSS_02_screenscraping_files/libs/quarto-html/popper.min.js"></script>
<script src="SICSS_02_screenscraping_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="SICSS_02_screenscraping_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SICSS_02_screenscraping_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="SICSS_02_screenscraping_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="SICSS_02_screenscraping_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.353">

  <meta name="author" content="Lecture: Jan Zilinsky">
  <title>Screenscraping</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="SICSS_02_screenscraping_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="SICSS_02_screenscraping_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="SICSS_02_screenscraping_files/libs/revealjs/dist/theme/quarto.css">
  <link href="SICSS_02_screenscraping_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="SICSS_02_screenscraping_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="SICSS_02_screenscraping_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="SICSS_02_screenscraping_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Screenscraping</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Lecture: Jan Zilinsky 
</div>
        <p class="quarto-title-affiliation">
            Summer Institute in Computational Social Science in Munich, 2023
          </p>
    </div>
</div>

</section>
<section id="what-is-screen-scraping" class="title-slide slide level1 center">
<h1>What is screen-scraping?</h1>

</section>

<section id="retrieving-information-and-processing-it-to-make-it-human-readable" class="title-slide slide level1 center">
<h1>Retrieving information and processing it to make it human-readable</h1>

</section>

<section>
<section id="what-we-will-do-today" class="title-slide slide level1 center">
<h1>What we will do today</h1>

</section>
<section id="section" class="slide level2">
<h2></h2>
<ol type="1">
<li>Scrape a messy table from Wikipedia</li>
<li>Scrape a set of URLs from a blog</li>
<li>Scrape and store text of blog posts</li>
</ol>
</section>
<section id="preliminaries" class="slide level2">
<h2>Preliminaries</h2>
<p>Verify whether site-owners allow scraping:</p>
<ul>
<li>check <code>robots.txt</code> file</li>
<li>check terms of service</li>
<li>communicate with responsible persons</li>
</ul>
</section>
<section id="screen-scraping-as-a-last-resort" class="slide level2">
<h2>Screen-scraping as a last resort?</h2>
<ul>
<li>Modern web designs make scraping difficult</li>
<li>Elements you care about will often be nested deeply within html files</li>
<li>Websites change all the time (or disappear)</li>
</ul>
</section></section>
<section>
<section id="screen-scraping-with-r" class="title-slide slide level1 center">
<h1>Screen-scraping with R</h1>

</section>
<section id="install-and-load-r-packages" class="slide level2">
<h2>Install and load R packages</h2>
<ul>
<li>Ensure the necessary packages are installed
<ul>
<li><a href="https://www.tidyverse.org/">tidyverse</a> for data manipulation</li>
<li><code>rvest</code> for reading websites into R:</li>
</ul></li>
<li>Then load all <code>tidyverse</code> core packages and <code>rvest</code>:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(rvest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<h3 id="first-example---scraping-a-wikipedia-page">First example - scraping a wikipedia page</h3>
<p>We are going to scrape this table from Wikipedia:</p>

<img data-src="img/screen/tab1.png" class="r-stretch"><div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Election results: </span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co"># https://en.wikipedia.org/wiki/2020_Slovak_parliamentary_election</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<h3 id="human-readable-vs-machine-readable">Human-readable vs machine-readable</h3>

<img data-src="img/screen/wiki_source.png" style="width:90.0%" class="r-stretch quarto-figure-center"></section>
<section id="store-the-full-page" class="slide level2">
<h2>Store the full page</h2>
<p>Passing the url as a character (string) using the rvest function <code>read_html()</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>svk2020_URL <span class="ot">&lt;-</span> <span class="st">"https://en.wikipedia.org/wiki/2020_Slovak_parliamentary_election"</span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>svk2020_html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(svk2020_URL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Returns an html_document containing the content of:</p>
<ul>
<li><code>&lt;head&gt;</code> tag (page metadata, mostly invisible to the user)</li>
<li><code>&lt;body&gt;</code>tag (the content of the page that is visible to the user)</li>
</ul>
</section>
<section id="view-the-content-of-the-object" class="slide level2">
<h2>View the content of the object</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>svk2020_html</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{html_document}
&lt;html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-zebra-design-disabled vector-feature-custom-font-size-clientpref-disabled vector-feature-client-preferences-disabled" lang="en" dir="ltr"&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
[2] &lt;body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr ...</code></pre>
</div>
</div>
</section>
<section id="parsing-html" class="slide level2">
<h2>Parsing HTML</h2>
<p>Think of HTML as a tree</p>

<img data-src="img/screen/html_tree.png" style="width:90.0%" class="r-stretch quarto-figure-center"></section>
<section id="finding-the-relevant-table" class="slide level2 smaller">
<h2>Finding the relevant table</h2>
<ol type="1">
<li>Open the page in your browser.</li>
<li>Right click on the page, select <code>Inspect</code> (may be called something else in your browser, e.g., <code>display source code</code>) or use CTRL+I shortcut. This should display the HTML structure of the webpage</li>
<li>Explore the structure of the file.</li>
<li>Find the element(s) you want to scrape.</li>
<li>Assuming you already have an html_document stored in your environment, try extracting the element with <code>html_elements()</code>.</li>
<li>Extract the text (<code>html_text()</code>) or data (<code>html_table()</code>) or attribute (<code>html_attr()</code>) you are interested in.</li>
</ol>
</section>
<section id="note-on-step-5" class="slide level2">
<h2>Note on step 5</h2>
<p><br><br></p>
<h3 id="html_elementx">html_element(x, …)</h3>
<ul>
<li>x = either a document, a node set or a single node</li>
<li>Then supply one of <strong>CSS</strong> or <strong>xpath</strong> depending on whether you want to use a CSS selector or XPath 1.0 expression</li>
</ul>
</section>
<section id="parsing-html-1" class="slide level2">
<h2>Parsing HTML</h2>
<p>Inspect tool:</p>

<img data-src="img/screen/tab1a.png" class="r-stretch"></section>
<section id="section-3" class="slide level2">
<h2></h2>

<img data-src="img/screen/tab1b.png" class="r-stretch"></section>
<section id="section-4" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>swk_wiki_section <span class="ot">&lt;-</span> <span class="fu">html_element</span>(svk2020_html, </span>
<span id="cb6-2"><a href="#cb6-2"></a>           <span class="at">xpath =</span> <span class="st">'//*[@id="mw-content-text"]/div[1]/table[3]'</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="fu">head</span>(swk_wiki_section)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$node
&lt;pointer: 0x10cb04d40&gt;

$doc
&lt;pointer: 0x10ca3b250&gt;</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>elect_tib <span class="ot">&lt;-</span> <span class="fu">html_table</span>(swk_wiki_section)</span>
<span id="cb8-2"><a href="#cb8-2"></a>elect_tib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 7
   ``      ``                                      ``    ``    ``    ``    ``   
   &lt;chr&gt;   &lt;chr&gt;                                   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1 "Party" Party                                   Votes %     +/–   Seats +/–  
 2 ""      Ordinary People and Independent Person… 721,… 25.03 +14.… 53    +34  
 3 ""      Direction – Social Democracy            527,… 18.29 –9.99 38    –11  
 4 ""      We Are Family                           237,… 8.24  +1.61 17    +6   
 5 ""      Kotlebists – People's Party Our Slovak… 229,… 7.97  –0.07 17    +3   
 6 ""      Coalition of Progressive Slovakia and … 200,… 6.97  New   0     New  
 7 ""      Freedom and Solidarity[f]               179,… 6.22  –5.88 13    –8   
 8 ""      For the People                          166,… 5.77  New   12    New  
 9 ""      Christian Democratic Movement           134,… 4.65  –0.29 0     0    
10 ""      Hungarian Community Togetherness        112,… 3.91  –0.14 0     0    
# ℹ 22 more rows</code></pre>
</div>
</div>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">View</span>(elect_tib)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="img/screen/elec_tib.png" class="r-stretch"></section>
<section id="lets-extract-only-the-relevant-rows-and-columns" class="slide level2">
<h2>Let’s extract only the relevant rows and columns</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>ET <span class="ot">&lt;-</span> elect_tib[<span class="dv">2</span><span class="sc">:</span><span class="dv">25</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb11-2"><a href="#cb11-2"></a>ET</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 3
   ``                                                                ``    ``   
   &lt;chr&gt;                                                             &lt;chr&gt; &lt;chr&gt;
 1 Ordinary People and Independent Personalities–NOVA–Christian Uni… 721,… 25.03
 2 Direction – Social Democracy                                      527,… 18.29
 3 We Are Family                                                     237,… 8.24 
 4 Kotlebists – People's Party Our Slovakia[e]                       229,… 7.97 
 5 Coalition of Progressive Slovakia and Together – Civic Democracy  200,… 6.97 
 6 Freedom and Solidarity[f]                                         179,… 6.22 
 7 For the People                                                    166,… 5.77 
 8 Christian Democratic Movement                                     134,… 4.65 
 9 Hungarian Community Togetherness                                  112,… 3.91 
10 Slovak National Party                                             91,1… 3.16 
# ℹ 14 more rows</code></pre>
</div>
</div>
<p>Issue: missing column names</p>
</section>
<section id="add-variable-names" class="slide level2">
<h2>Add variable names</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">names</span>(ET) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Party"</span>,<span class="st">"Votes"</span>,<span class="st">"Percent"</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a>ET</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 3
   Party                                                           Votes Percent
   &lt;chr&gt;                                                           &lt;chr&gt; &lt;chr&gt;  
 1 Ordinary People and Independent Personalities–NOVA–Christian U… 721,… 25.03  
 2 Direction – Social Democracy                                    527,… 18.29  
 3 We Are Family                                                   237,… 8.24   
 4 Kotlebists – People's Party Our Slovakia[e]                     229,… 7.97   
 5 Coalition of Progressive Slovakia and Together – Civic Democra… 200,… 6.97   
 6 Freedom and Solidarity[f]                                       179,… 6.22   
 7 For the People                                                  166,… 5.77   
 8 Christian Democratic Movement                                   134,… 4.65   
 9 Hungarian Community Togetherness                                112,… 3.91   
10 Slovak National Party                                           91,1… 3.16   
# ℹ 14 more rows</code></pre>
</div>
</div>
</section>
<section id="fix-variable-type" class="slide level2">
<h2>Fix variable type</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">str</span>(ET<span class="sc">$</span>Percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:24] "25.03" "18.29" "8.24" "7.97" "6.97" "6.22" "5.77" "4.65" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Make it numeric:</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>ET<span class="sc">$</span>Percent <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(ET<span class="sc">$</span>Percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>ET <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2"></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Percent,</span>
<span id="cb18-3"><a href="#cb18-3"></a>            <span class="at">y=</span>Party)) <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4"></a> <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="SICSS_02_screenscraping_files/figure-revealjs/unnamed-chunk-13-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="section-7" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>ET <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2"></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Percent,</span>
<span id="cb19-3"><a href="#cb19-3"></a>            <span class="at">y=</span><span class="fu">fct_reorder</span>(Party,Percent))) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4"></a> <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="SICSS_02_screenscraping_files/figure-revealjs/unnamed-chunk-14-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="section-8" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>ET <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2"></a> <span class="fu">mutate</span>(<span class="at">Party=</span><span class="fu">ifelse</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(Party,<span class="st">"Ordinary People"</span>),<span class="st">"OLANO"</span>,Party)) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Percent,</span>
<span id="cb20-4"><a href="#cb20-4"></a>            <span class="at">y=</span><span class="fu">fct_reorder</span>(Party,Percent))) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5"></a> <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6"></a> <span class="fu">labs</span>(<span class="at">y=</span><span class="st">""</span>,<span class="at">title =</span> <span class="st">"Election Results, 2020 Slovak Election"</span>) <span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7"></a> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="SICSS_02_screenscraping_files/figure-revealjs/unnamed-chunk-15-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="css-selectors-as-alternative-to-xpath" class="slide level2">
<h2>CSS selectors as alternative to XPath</h2>
<ul>
<li>One alternative for XPath is the use of <a href="https://en.wikipedia.org/wiki/Cascading_Style_Sheets">CSS</a> selectors</li>
<li><a href="http://selectorgadget.com/">Selector Gadget</a> is an interactive tool for finding CSS selectors</li>
<li>The idea of selector gadget is to select elements that you want to scrape and to copy the corresponding css selector</li>
</ul>
</section>
<section id="example-marginalrevolution.com" class="slide level2">
<h2>Example: Marginalrevolution.com</h2>
<h3 id="using-the-css-selector-in-r">Using the CSS selector in R</h3>
<p>Steps:</p>
<ul>
<li>parse web page</li>
<li>choose nodes by css selector</li>
<li>extract links via attribute (<em>href</em>)</li>
</ul>
</section>
<section id="section-9" class="slide level2">
<h2></h2>

<img data-src="img/screen/selector.png" class="r-stretch"></section>
<section id="section-10" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>MR <span class="ot">&lt;-</span> <span class="st">"https://marginalrevolution.com"</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>MR_html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(MR)</span>
<span id="cb21-3"><a href="#cb21-3"></a>elements <span class="ot">&lt;-</span> <span class="fu">html_elements</span>(MR_html, <span class="at">css =</span> <span class="st">'h2.entry-title'</span>) <span class="co"># this used to be html_node()</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>nodes <span class="ot">&lt;-</span> <span class="fu">html_node</span>(elements,<span class="st">"a"</span>)</span>
<span id="cb21-5"><a href="#cb21-5"></a>urls <span class="ot">&lt;-</span>  <span class="fu">html_attr</span>(nodes, <span class="st">"href"</span>)</span>
<span id="cb21-6"><a href="#cb21-6"></a>urls[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://marginalrevolution.com/marginalrevolution/2023/09/the-importance-of-mentorship.html"        
[2] "https://marginalrevolution.com/marginalrevolution/2023/09/friday-assorted-links-436.html"           
[3] "https://marginalrevolution.com/marginalrevolution/2023/09/patience-and-educational-achievement.html"</code></pre>
</div>
</div>
</section>
<section id="same-result-less-code" class="slide level2">
<h2>Same result, less code</h2>
<div class="cell" data-layout-align="center" data-linewidth="80">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>MR <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="fu">html_elements</span>(<span class="st">'h2.entry-title a'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="fu">html_attr</span>(<span class="st">'href'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "https://marginalrevolution.com/marginalrevolution/2023/09/the-importance-of-mentorship.html"                               
 [2] "https://marginalrevolution.com/marginalrevolution/2023/09/friday-assorted-links-436.html"                                  
 [3] "https://marginalrevolution.com/marginalrevolution/2023/09/patience-and-educational-achievement.html"                       
 [4] "https://marginalrevolution.com/marginalrevolution/2023/09/thursday-assorted-love-links.html"                               
 [5] "https://marginalrevolution.com/marginalrevolution/2023/09/the-rise-of-and-demand-for-identity-oriented-media-coverage.html"
 [6] "https://marginalrevolution.com/marginalrevolution/2023/09/pharmaceutical-externalities.html"                               
 [7] "https://marginalrevolution.com/marginalrevolution/2023/09/modern-principles.html"                                          
 [8] "https://marginalrevolution.com/marginalrevolution/2023/09/my-excellent-conversation-with-lazarus-lake-ultra-marathons.html"
 [9] "https://marginalrevolution.com/marginalrevolution/2023/09/wednesday-assorted-links-419.html"                               
[10] "https://marginalrevolution.com/marginalrevolution/2023/09/robert-barro-and-rachel-mccleary-to-heritage.html"               
[11] "https://marginalrevolution.com/marginalrevolution/2023/09/median-voter-theorem-again.html"                                 
[12] "https://marginalrevolution.com/marginalrevolution/2023/09/the-british-ban-on-bully-dogs.html"                              
[13] "https://marginalrevolution.com/marginalrevolution/2023/09/what-explains-educational-polarization-among-white-voters.html"  
[14] "https://marginalrevolution.com/marginalrevolution/2023/09/tuesday-assorted-links-434.html"                                 
[15] "https://marginalrevolution.com/marginalrevolution/2023/09/what-government-shutdown.html"                                   </code></pre>
</div>
</div>
</section>
<section id="extracting-texts-from-articles" class="slide level2">
<h2>Extracting texts from articles</h2>
<p>The following code takes an url as an input and returns the corresponding text:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="st">"https://marginalrevolution.com/marginalrevolution/2023/07/when-is-best-in-life-to-read-or-reread-many-of-the-greatest-classic-novels.html"</span> <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2"></a> <span class="fu">read_html</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3"></a> <span class="fu">html_nodes</span>(<span class="st">'div.entry-content'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4"></a> <span class="fu">html_text</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "\n    First of all, and most of all, read them when you are young (teens and 20s) so they can still influence the longer trajectory of your life!\nBut let’s say you are past that point.&nbsp; It seems to me an optimal amount of waiting is in order.&nbsp; You want at least one of your rereads to come at the near-peak of your knowledge, understanding, and emotional development.&nbsp; So age 60 might be better than age 47, if only to maximize appreciation?\nI suspect that at age 80 you have lost a bit too much emotional energy to appreciate them as much as possible?&nbsp; But that is debatable, and perhaps for some people that point sets in before age 60.\nMost generally, another reread is usually a good idea, no matter what your age.\nShould you spread those rereads out over time, or is there a case for bunching at a single mini-era in your life?\nIn London and Siena I have been rereading Thomas Hardy’s 1878 Return of the Native, Hardy of course being one of the all-time greats.\n\n  "</code></pre>
</div>
</div>
</section>
<section id="section-11" class="slide level2">
<h2></h2>
<h3 id="use-the-variable-we-have-stored-earlier-and-select-one-element">Use the variable we have stored earlier and select one element</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>urls[<span class="dv">3</span>] <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2"></a> <span class="fu">read_html</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3"></a> <span class="fu">html_nodes</span>(<span class="st">'div.entry-content'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4"></a> <span class="fu">html_text</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "\n    That is the topic of my latest Bloomberg column, here is one excerpt:\nEconomists have once again entered the fray, this time with a study that tries to determine how patience is correlated with better educational outcomes. The&nbsp;results&nbsp;are impressive, albeit unsettling. In Italy, differing degrees of patience account for two-thirds of the achievement variation across the country’s regions. In the US, differing degrees of patience account for one-third of the variation in educational outcomes across states, a smaller amount but still notable.\nBefore I go any further, you might be wondering which are the most patient states. They are (in alphabetical order) Maine, Montana, Vermont and Wyoming. The least patient state? California. In Italy, patience is highest in the northern region bordering Austria, which has a relatively Germanic culture and history. Patience is the lowest by far in Sicily. In both Italy and the US, patience is generally greater in the North than in the South.\nThese results do not necessarily mean that lower patience results in lower grades. It could be that doing well in school makes you more patient, because you learn that working hard has its own rewards, and that may lengthen your time horizon. Or there may be some underlying factor, say conscientiousness, that is key to both patience and academic achievement.\nStill, it is hard to avoid the overall impression that there is a tight connection between certain “bourgeois virtues” and academic achievement. If you are a parent, you might want to be rooting for your child to be more patient rather than less, no matter how complex all the interrelationships among the various personal and cultural attributes may turn out to be.\nThe researchers estimated patience by an ingenious method. There is already a widely accepted global preference survey that&nbsp;measures&nbsp;patience across nations. They then used Facebook data on interests, clicks and likes to see which interests were most popular in the more patient nations. Then they examined that data to see how popular those interests were in the various regions of those countries.\n\nHere is the underyling research by Eric A. Hanushek, Lavinia Kinne, Pietro Sancassani, and Ludger Woessmann.&nbsp; I do consider whether “patience” is exactly the right word for what is going on here.&nbsp; Hat tip also to The Wisdom of Garett Jones.\n\n  "</code></pre>
</div>
</div>
</section>
<section id="looping-over-news-articles" class="slide level2">
<h2>Looping over news articles</h2>
<p>We could further automate the process of visiting each url and extracting the texts of articles.</p>
</section>
<section id="if-everything-else-fails-browser-automation" class="slide level2 smaller">
<h2>If everything else fails: browser automation</h2>
<ul>
<li>If you cannot process HTML, an alternative solution could be browser automation</li>
<li>Read about RSelenium: https://cran.r-project.org/web/packages/RSelenium/</li>
</ul>
</section>
<section id="when-should-you-use-screen-scraping" class="slide level2">
<h2>When should you use screen-scraping?</h2>
<ul>
<li>Typically, APIs would be preferred</li>
<li>But screen-scraping can be useful in some situations</li>
</ul>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="SICSS_02_screenscraping_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="SICSS_02_screenscraping_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="SICSS_02_screenscraping_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="SICSS_02_screenscraping_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="SICSS_02_screenscraping_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="SICSS_02_screenscraping_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="SICSS_02_screenscraping_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="SICSS_02_screenscraping_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="SICSS_02_screenscraping_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="SICSS_02_screenscraping_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>